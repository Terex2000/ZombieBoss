#include "MenuController.h"
#include <SFML/Window/Keyboard.hpp>

MenuController::MenuController(MainMenu& model, Settings& modelSetting, InputManager& inputManager)
    : model(model),  modelSetting(model), inputManager(inputManager) {}

void MenuController::handleInput() {
    if (sf::Keyboard::isKeyPressed(sf::Keyboard::Up)) {
        model.selectPrevious();
    }
    if (sf::Keyboard::isKeyPressed(sf::Keyboard::Down)) {
        model.selectNext();
    }
    if (sf::Keyboard::isKeyPressed(sf::Keyboard::Enter)) {
        if (model.getSelectedOption() == MainMenu::Quit) {
            exit(0); // Quitter le jeu
        }
    }
}

void SettingsController::handleInputSetting(sf::Event event) {
    if (event.type == sf::Event::KeyPressed) {
        if (event.key.code == sf::Keyboard::Up) {
            model.selectPrevious();
        } else if (event.key.code == sf::Keyboard::Down) {
            model.selectNext();
        } else if (event.key.code == sf::Keyboard::Enter) {
            // Gérer les options sélectionnées
            switch (model.getSelectedOption()) {
                case 0: // Changer la difficulté
                    model.setDifficulty(static_cast<Settings::Difficulty>((model.getDifficulty() + 1) % 3));
                    break;
                case 1: // Modifier le volume
                    model.setVolume((model.getVolume() + 10) % 110);
                    break;
                case 2: // Activer/désactiver le plein écran
                    model.setFullscreen(!model.isFullscreen());
                    break;
                case 3: // Retour
                    // Retourner au menu principal
                    break;
            }
        }
    }
}
